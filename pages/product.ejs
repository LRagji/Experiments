<!doctype html>
<html lang="en">

<head>
    <% include ./head %>

    <title>Health Mall-
        <%= pageData.product.name %>
    </title>
</head>

<body class="bg-light">
    <!-- Main Nav -->
    <% include ./header %>
    <!-- Content   -->
    <div class="container mt-5">

        <div class="card myshadow">
            <div class="card-body">
                <!-- Product Name -->
                <div class="row">
                    <div class="col my-1">
                        <h4 class="card-title">
                            <%= pageData.product.name %>
                        </h4>
                    </div>
                </div>

                <!-- Product Details -->
                <div class="row mx-0">
                    <div class="col-md-auto pl-0"><img class="img-thumbnail" src=<%-'./static/resources/images/products/'+pageData.product.image
                            %> alt="Product Image">
                    </div>
                    <div class="col">
                        <ul>
                            <li>Item # : <b>
                                    <%= pageData.product.id %></b></li>
                            <li>Category : <b>
                                    <%= pageData.product.meta.category %></b></li>
                            <li>Sub-Category : <b>
                                    <%= pageData.product.meta.subCategory %></b></li>
                            <li>Product Code : <b>
                                    <%= pageData.product.meta.code %></b></li>
                            <li>Package Details : <b>
                                    <%= pageData.product.meta.package_detail %></b></li>
                            <li>Serving Size : <b>
                                    <%= pageData.product.meta.serving_size %></b></li>
                            <li>Serving per Container : <b>
                                    <%= pageData.product.meta.serving_per_container %></b></li>
                            <li>Ships in: <b>
                                    <%= pageData.product.meta.shippingdetail %> day(s)</b></li>
                            <li>Visit<a target="blank" href="<%= pageData.product.meta.mwebsite %>">
                                    <%= pageData.product.meta.mname %></a></li>
                        </ul>
                        <div class="d-flex">
                            <button onClick="addProductToSession(<%=pageData.product.id %>,1)" class="btn btn-primary"
                                type="button">Add to Cart</button>
                        </div>
                    </div>
                </div>

                <!-- Expander Tabs -->
                <div class="row my-1">
                    <div class="accordion col" id="accordionExample">
                        <div class="card">
                            <div class="card-header" id="headingOne">
                                <h5 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne"
                                        aria-expanded="true" aria-controls="collapseOne">
                                        Description
                                    </button>
                                </h5>
                            </div>

                            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                                <div class="card-body">
                                    <%- pageData.product.description %>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" id="headingTwo">
                                <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                        data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                        Ingredients
                                    </button>
                                </h5>
                            </div>
                            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                                <div class="card-body">
                                    <%- pageData.product.ingredients %>
                                </div>
                            </div>
                        </div>
                        <% if (pageData.product.faq.length>=1) { %>
                        <%- 
                        `<div class="card">
                            <div class="card-header" id="headingThree">
                                <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                        data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                        FAQ's
                                    </button>
                                </h5>
                            </div>
                            <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                                <div class="card-body">
                                   <ul class="list-unstyled" >`+ 
                                        pageData.product.faq.map(function(faq){ 
                                       return `<li>
                                           <div class="row" >
                                               <div class="col-md">
                                                    <span><i class="fas fa-question"></i> ${faq.Q}</span>
                                               </div>
                                           </div>
                                           <div class="row" >
                                                <div class="col-md pl-5">
                                                    ${faq.A}
                                                </div>
                                            </div>
                                            <div class="row" >
                                                    <div class="col-md">
                                                        <hr>
                                                    </div>
                                                </div>
                                          </li>`
                                          }).join('')
                                          +
                                   `</ul>
                                </div>
                            </div>
                        </div>`
                        %>
                        <% } %>
                    </div>
                </div>

                <!-- Related Products -->
                <div class="row my-1 py-2">
                    <div class="col">
                        <h4>Related Products</h4>
                        <div id="resultContainer" class="d-flex justify-content-center justify-content-md-around flex-wrap"></div>
                        <div id="loadingSpinner" class="my-2">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                    aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                    <span id="loadingMessage">Loading Products</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <% include ./footer %>
    <script src="../static/resources/scripts/paginatedrelatedproducts.js"></script>
</body>

</html>