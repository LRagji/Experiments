<!doctype html>
<html lang="en">

<head>
    <link rel="stylesheet" href="../static/resources/styles/owl.carousel.min.css">
    <link rel="stylesheet" href="../static/resources/styles/owl.theme.default.min.css">
    <% include ./head %>

    <title>Health Mall</title>
</head>

<body class="bg-light">
    <!-- Main Nav -->
    <% include ./header %>

    <!-- Site Content -->
    <div class="container-fluid" id="mainContainer">
        <!-- Carousel -->
        <div id="banners" class="myshadow carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#banners" data-slide-to="0" class="active"></li>
                <li data-target="#banners" data-slide-to="1"></li>
                <li data-target="#banners" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="./static/resources/images/banners/banner1.jpg" alt="First Banner">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="./static/resources/images/banners/banner2.jpg" alt="Second Banner">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="./static/resources/images/banners/banner3.jpg" alt="Third Banner">
                </div>
            </div>
            <a class="carousel-control-prev" href="#banners" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#banners" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

        <!-- Best Sellers -->
        <div class="row my-3" <%- pageData.bestSellers.length<1?'hidden':'' %>>
            <div class="col">
                <div class="card myshadow">
                    <div class="card-header">
                        <h4>Best Sellers</h4>
                    </div>
                    <div class="card-body">
                        <div class="owl-carousel owl-theme">
                            <% pageData.bestSellers.forEach(function(product){ %>
                            <%- `<div class="item card-body m-2 myproductcard">
                                    <a href="/product?pid=${product.id}" >
                                        <img class="productThumbnail mx-auto" src="../static/resources/images/products/${product.image}" style="max-width:100px;max-height:120px" alt="Product Image">
                                    </a>
                                    <div class="card-body">
                                   <strong>${product.name}</strong>
                                        <div class="d-flex justify-content-center align-items-center my-2">
                                        <h3 class="text-success">
                                        &#8377;${product.offerprice}
                                        <small><small class="text-muted"><del>&#8377;${product.price}</del></small></small>
                                        </h3>
                                        </div>
                                        <div class="d-flex justify-content-center align-items-center">
                                        <small>Ships in ${product.meta.shippingdetail} day(s)</small>
                                        </div>
                                        <div class="d-flex justify-content-center align-items-center">
                                        <button onClick=addProductToSession(${product.id},1) class="btn btn-success my-2 mr-0" type="submit"><i class="fas fa-cart-plus"></i>
                                                Add to cart</button>
                                        </div>
                                    </div>
                                </div>` %>
                            <% }); %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- New Arrivals -->
        <div class="row my-3" <%- pageData.newArrivals.length<1?'hidden':'' %> >
            <div class="col">
                <div class="card myshadow">
                    <div class="card-header">
                        <h4>New Arrivals</h4>
                    </div>
                    <div class="card-body">
                        <div class="owl-carousel owl-theme">
                            <% pageData.newArrivals.forEach(function(product){ %>
                            <%- `<div class="item card-body m-2 myproductcard">
                                        <a href="/product?pid=${product.id}" >
                                            <img class="productThumbnail mx-auto" src="../static/resources/images/products/${product.image}" style="max-width:100px;max-height:120px" alt="Product Image">
                                        </a>
                                        <div class="card-body">
                                       <strong>${product.name}</strong>
                                            <div class="d-flex justify-content-center align-items-center my-2">
                                            <h3 class="text-success">
                                            &#8377;${product.offerprice}
                                            <small><small class="text-muted"><del>&#8377;${product.price}</del></small></small>
                                            </h3>
                                            </div>
                                            <div class="d-flex justify-content-center align-items-center">
                                            <small>Ships in ${product.meta.shippingdetail} day(s)</small>
                                            </div>
                                            <div class="d-flex justify-content-center align-items-center">
                                            <button onClick=addProductToSession(${product.id},1) class="btn btn-success my-2 mr-0" type="submit"><i class="fas fa-cart-plus"></i>
                                                    Add to cart</button>
                                            </div>
                                        </div>
                                    </div>` %>
                            <% }); %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Recently Bought -->
        <div class="row my-3" <%- pageData.rb.length<1?'hidden':'' %>>
            <div class="col">
                <div class="card myshadow">
                    <div class="card-header">
                        <h4>Recently Bought</h4>
                    </div>
                    <div class="card-body">
                        <div class="owl-carousel owl-theme">
                            <% pageData.rb.forEach(function(product){ %>
                            <%- `<div class="item card-body m-2 myproductcard">
                                    <a href="/product?pid=${product.id}" >
                                        <img class="productThumbnail mx-auto" src="../static/resources/images/products/${product.image}" style="max-width:100px;max-height:120px" alt="Product Image">
                                    </a>
                                    <div class="card-body">
                                   <strong>${product.name}</strong>
                                        <div class="d-flex justify-content-center align-items-center my-2">
                                        <h3 class="text-success">
                                        &#8377;${product.offerprice}
                                        <small><small class="text-muted"><del>&#8377;${product.price}</del></small></small>
                                        </h3>
                                        </div>
                                        <div class="d-flex justify-content-center align-items-center">
                                        <small>Ships in ${product.meta.shippingdetail} day(s)</small>
                                        </div>
                                        <div class="d-flex justify-content-center align-items-center">
                                        <button onClick=addProductToSession(${product.id},1) class="btn btn-success my-2 mr-0" type="submit"><i class="fas fa-cart-plus"></i>
                                                Add to cart</button>
                                        </div>
                                    </div>
                                </div>` %>
                            <% }); %>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <% include ./footer %>
    <script src="../static/resources/scripts/owl.carousel.min.js"></script>
    <script>
        var shoppingBadge = $('#shoppingCart');

        function addProductToSession(productId, quantity) {
            $.post("/v1/cart/products", { productId: productId, quantity: quantity }).always((responseData) => {
                if (responseData !== undefined && responseData.TotalProducts !== undefined && parseInt(responseData.TotalProducts)) {
                    showSucess("Product added to your shopping cart.")
                    shoppingBadge.text(parseInt(responseData.TotalProducts));
                }
                else {
                    showFailure("Failed to add product to cart.");
                }
            });
        }

        $(document).ready(function () {
            $(".owl-carousel").owlCarousel(
                {
                    margin: 0,
                    loop: false,
                    autoWidth: true,
                    items: 4,
                    nav: true,
                    dots: true
                }
            );
        });
    </script>
</body>

</html>